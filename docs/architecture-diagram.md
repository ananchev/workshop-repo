# AWS DevOps Workshop Infrastructure Architecture

## Complete Infrastructure Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    Internet                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ Internet Gateway â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              VPC (10.0.0.0/16)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Public Subnets                                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚  â”‚   PublicSubnetOne       â”‚     â”‚   PublicSubnetTwo       â”‚                â”‚    â”‚
â”‚  â”‚  â”‚   (10.0.0.0/24)         â”‚     â”‚   (10.0.1.0/24)         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚   AZ-1                  â”‚     â”‚   AZ-2                  â”‚                â”‚    â”‚
â”‚  â”‚  â”‚                         â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   NAT Gateway   â”‚    â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚  â”‚  (EIP Attached) â”‚    â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                 Application Load Balancer (ALB)                             â”‚    â”‚
â”‚  â”‚                    Name: alb-devops-workshop                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚    â”‚
â”‚  â”‚  â”‚   Listener :80      â”‚     â”‚   Listener :8080    â”‚                        â”‚    â”‚
â”‚  â”‚  â”‚   (Production)      â”‚     â”‚   (Test)            â”‚                        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â”‚
â”‚  â”‚            â”‚                           â”‚                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚    â”‚
â”‚  â”‚  â”‚ TargetGroupPublic â”‚       â”‚DummyTargetGroup   â”‚                          â”‚    â”‚
â”‚  â”‚  â”‚ecs-devops-webapp  â”‚       â”‚ecs-devops-webapp â”‚                           â”‚    â”‚
â”‚  â”‚  â”‚      -TG          â”‚       â”‚     -TG-tmp       â”‚                          â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Private Subnets                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚    â”‚
â”‚  â”‚  â”‚   PrivateSubnetOne      â”‚     â”‚   PrivateSubnetTwo      â”‚                â”‚    â”‚
â”‚  â”‚  â”‚   (10.0.100.0/24)       â”‚     â”‚   (10.0.101.0/24)       â”‚                â”‚    â”‚
â”‚  â”‚  â”‚   AZ-1                  â”‚     â”‚   AZ-2                  â”‚                â”‚    â”‚
â”‚  â”‚  â”‚                         â”‚     â”‚                         â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”‚    ECS Tasks        â”‚ â”‚     â”‚ â”‚    ECS Tasks        â”‚ â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚     â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”‚  â”‚  webapp:80    â”‚  â”‚ â”‚     â”‚ â”‚  â”‚  webapp:80    â”‚  â”‚ â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”‚  â”‚  (Container)  â”‚  â”‚ â”‚     â”‚ â”‚  â”‚  (Container)  â”‚  â”‚ â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚     â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚                â”‚    â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Infrastructure Components

### ğŸŒ **Network Layer**
```
VPC (10.0.0.0/16)
â”œâ”€â”€ Public Subnets (Internet Access)
â”‚   â”œâ”€â”€ PublicSubnetOne (10.0.0.0/24) - AZ-1
â”‚   â””â”€â”€ PublicSubnetTwo (10.0.1.0/24) - AZ-2
â”œâ”€â”€ Private Subnets (ECS Tasks)
â”‚   â”œâ”€â”€ PrivateSubnetOne (10.0.100.0/24) - AZ-1
â”‚   â””â”€â”€ PrivateSubnetTwo (10.0.101.0/24) - AZ-2
â”œâ”€â”€ Internet Gateway (Public Internet Access)
â”œâ”€â”€ NAT Gateway (Outbound Internet for Private Subnets)
â””â”€â”€ Route Tables (Traffic Routing)
```

### âš–ï¸ **Load Balancing Layer**
```
Application Load Balancer (alb-devops-workshop)
â”œâ”€â”€ Listener :80 (Production Traffic)
â”‚   â””â”€â”€ Routes to: ecs-devops-webapp-TG
â”œâ”€â”€ Listener :8080 (Test Traffic)  
â”‚   â””â”€â”€ Routes to: ecs-devops-webapp-TG-tmp
â””â”€â”€ Security Group (Allow HTTP from Internet)
```

### ğŸ³ **Container Platform**
```
ECS Cluster (ecs-devops-workshop)
â”œâ”€â”€ Task Definition (webapp-devops-workshop)
â”‚   â”œâ”€â”€ CPU: 256 units
â”‚   â”œâ”€â”€ Memory: 512 MB
â”‚   â”œâ”€â”€ Network Mode: awsvpc
â”‚   â””â”€â”€ Container: webapp:80
â”œâ”€â”€ ECS Service
â”‚   â”œâ”€â”€ Desired Count: 2 tasks
â”‚   â”œâ”€â”€ Launch Type: Fargate
â”‚   â”œâ”€â”€ Deployment: CODE_DEPLOY (Blue/Green)
â”‚   â””â”€â”€ Health Check Grace Period: 60s
â””â”€â”€ Tasks Distribution
    â”œâ”€â”€ Task 1 â†’ PrivateSubnetOne
    â””â”€â”€ Task 2 â†’ PrivateSubnetTwo
```

### ğŸ” **Security Layer**
```
Security Groups
â”œâ”€â”€ PublicLoadBalancerSG
â”‚   â””â”€â”€ Allows: All traffic from Internet (0.0.0.0/0)
â”œâ”€â”€ ContainerSecurityGroup  
â”‚   â”œâ”€â”€ Allows: All traffic from ALB Security Group
â”‚   â””â”€â”€ Allows: Inter-container communication
â””â”€â”€ Network ACLs (Default VPC settings)
```

### ğŸ›ï¸ **IAM Roles**
```
IAM Roles
â”œâ”€â”€ ECSTaskExecutionRole
â”‚   â””â”€â”€ Policies: AmazonECSTaskExecutionRolePolicy
â”œâ”€â”€ TaskRole (Container Runtime)
â”‚   â”œâ”€â”€ Deny: All IAM actions (security)
â”‚   â”œâ”€â”€ Allow: SSM Session Manager
â”‚   â””â”€â”€ Allow: CloudWatch Logs
â”œâ”€â”€ AWSServiceRoleForECS
â””â”€â”€ AWSServiceRoleForElasticLoadBalancing
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Internet  â”‚â”€â”€â”€â–¶â”‚     ALB     â”‚â”€â”€â”€â–¶â”‚ Target Groupâ”‚â”€â”€â”€â–¶â”‚ ECS Tasks   â”‚
â”‚   Traffic   â”‚    â”‚   :80/:8080 â”‚    â”‚    Health   â”‚    â”‚  (Fargate)  â”‚
â”‚             â”‚    â”‚             â”‚    â”‚   Checks    â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Blue/Green   â”‚
                   â”‚  Deployment   â”‚
                   â”‚   Strategy    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Resource Specifications

| Component | Configuration | Purpose |
|-----------|---------------|---------|
| **VPC** | 10.0.0.0/16 | Isolated network environment |
| **Public Subnets** | 2 subnets across AZs | ALB placement, NAT Gateway |
| **Private Subnets** | 2 subnets across AZs | ECS task placement |
| **ALB** | Internet-facing | Route external traffic to containers |
| **Target Groups** | 2 groups (primary/temp) | Blue/Green deployment support |
| **ECS Cluster** | Fargate launch type | Serverless container hosting |
| **Tasks** | 2 replicas | High availability |
| **Container** | nginx:latest | Web application hosting |

## DevOps Integration Points

### ğŸ”„ **CI/CD Pipeline Integration**
- **ECR Repository**: Container image storage
- **ECS Service**: Blue/Green deployment target
- **Target Groups**: Traffic switching during deployments
- **CodeDeploy**: Orchestrates Blue/Green deployments

### ğŸ“Š **Monitoring & Logging**
- **CloudWatch Logs**: Container application logs
- **ALB Access Logs**: Request/response logging
- **Target Group Health**: Application health monitoring
- **ECS Service Metrics**: Task and service performance

This infrastructure provides a production-ready environment for demonstrating modern DevOps practices with containerized applications on AWS.